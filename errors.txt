 while (1) {

        uxBits = xEventGroupWaitBits(main_event_group, CONNECTED_BIT | INITIALIZING_BIT | INITIALIZED_BIT, false, false,
                                     portMAX_DELAY);

        if ((uxBits & LOADING_DATA_BIT) > 0) {
            continue;
        }

        if ((uxBits & CONNECTED_BIT) == 0) {
            continue;
            printf("NOT READY\n");
        }

            /* Device is connected to wifi, but was not set yet */
        else if ((uxBits & (INITIALIZING_BIT | INITIALIZED_BIT)) == 0) {
            printf("REGISTER\n");

            strcpy(path, "/api/lyra/v1/register");
        }

            /* Device made a request but was not paired yet, waiting for pairing */
        else if (uxBits & INITIALIZING_BIT) {

            strcpy(path, "/api/lyra/v1/register/");
            strcat(path, data_config->device_id);

            vTaskDelay(10000 / portTICK_PERIOD_MS);

        } else if (uxBits & INITIALIZED_BIT) {
            printf("CLASSIC\n");

            strcpy(path, "/api/lyra/v1/");
            strcat(path, data_config->device_id);
            strcat(path, "/");
            strcat(path, battery_percent);
        }

        printf("lets go READY\n");
        xEventGroupSetBits(main_event_group, LOADING_DATA_BIT);
        http_rest_with_url(&path);

        vTaskDelay(50 / portTICK_PERIOD_MS);
    }